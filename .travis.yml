env:
  global:
    - CC_TEST_REPORTER_ID=a781d0a797358fd2ef02c8fbbdd920386407698f62f0698dc393751b178a68eb

language: go

sudo: false

go:
  - 1.4
  - 1.5
  - 1.6
  - 1.7
  - 1.8

before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build

script:
  - go test -v ./...

after_script:
  # Preferably you will run test-reporter on branch update events. But 
  # if you setup travis to build PR updates only, you don't need to run 
  # the line below
  - if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT; fi
  # In the case where travis is setup to build PR updates only, 
  # uncomment the line below
  - ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT